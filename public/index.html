<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="English Flashcard - ·ª®ng d·ª•ng h·ªçc ti·∫øng Anh b·∫±ng th·∫ª ghi nh·ªõ">
    <title>English Flashcard | H·ªçc Ti·∫øng Anh</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- LOGIN PAGE -->
    <div class="login-overlay" id="login-overlay">
        <div class="login-container">
            <div class="login-card glass">
                <div class="login-logo">üé¥</div>
                <h1 class="login-title">English Flashcard</h1>
                <p class="login-subtitle" id="login-subtitle">ƒêƒÉng nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc</p>

                <!-- TABS -->
                <div class="auth-tabs">
                    <button class="auth-tab active" id="tab-login" onclick="switchAuthTab('login')">üîê ƒêƒÉng
                        nh·∫≠p</button>
                    <button class="auth-tab" id="tab-register" onclick="switchAuthTab('register')">üìù ƒêƒÉng k√Ω</button>
                </div>

                <!-- LOGIN FORM -->
                <form id="login-form" class="auth-form active" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" id="login-username" class="text-input" required
                            placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p" minlength="3">
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="login-password" class="text-input" required
                            placeholder="Nh·∫≠p m·∫≠t kh·∫©u" minlength="6">
                    </div>
                    <div class="login-error hidden" id="login-error"></div>
                    <button type="submit" class="btn btn-primary btn-lg btn-block">üîê ƒêƒÉng nh·∫≠p</button>
                    <p class="auth-switch">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#"
                            onclick="switchAuthTab('register'); return false;">ƒêƒÉng k√Ω ngay</a></p>
                </form>

                <!-- REGISTER FORM -->
                <form id="register-form" class="auth-form" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>T√™n ƒëƒÉng nh·∫≠p</label>
                        <input type="text" id="reg-username" class="text-input" required placeholder="T·ªëi thi·ªÉu 3 k√Ω t·ª±"
                            minlength="3">
                    </div>
                    <div class="form-group">
                        <label>T√™n hi·ªÉn th·ªã</label>
                        <input type="text" id="reg-displayname" class="text-input" placeholder="T√™n c·ªßa b·∫°n (t√πy ch·ªçn)">
                    </div>
                    <div class="form-group">
                        <label>M·∫≠t kh·∫©u</label>
                        <input type="password" id="reg-password" class="text-input" required
                            placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6">
                    </div>
                    <div class="register-error hidden" id="register-error"></div>
                    <button type="submit" class="btn btn-success btn-lg btn-block">üìù ƒêƒÉng k√Ω t√†i kho·∫£n</button>
                    <p class="auth-switch">ƒê√£ c√≥ t√†i kho·∫£n? <a href="#"
                            onclick="switchAuthTab('login'); return false;">ƒêƒÉng nh·∫≠p</a></p>
                </form>
            </div>
        </div>
    </div>

    <!-- SIDEBAR -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <span class="logo-icon">üé¥</span>
            <span class="logo-text">FlashCard</span>
        </div>
        <ul class="sidebar-menu">
            <li class="menu-item active" data-page="home" onclick="navigateTo('home')">
                <span class="menu-icon">üè†</span><span class="menu-label">Trang ch·ªß</span>
            </li>
            <li class="menu-item" data-page="study" onclick="navigateTo('study')">
                <span class="menu-icon">üÉè</span><span class="menu-label">H·ªçc Flashcard</span>
            </li>
            <li class="menu-item" data-page="quiz" onclick="navigateTo('quiz')">
                <span class="menu-icon">üìù</span><span class="menu-label">Ki·ªÉm tra</span>
            </li>
            <li class="menu-item" data-page="manage" onclick="navigateTo('manage')">
                <span class="menu-icon">üìö</span><span class="menu-label">Qu·∫£n l√Ω t·ª´</span>
            </li>
            <li class="menu-item" data-page="sentences" onclick="navigateTo('sentences')">
                <span class="menu-icon">üìê</span><span class="menu-label">C·∫•u tr√∫c c√¢u</span>
            </li>
            <li class="menu-item" data-page="progress" onclick="navigateTo('progress')">
                <span class="menu-icon">üìä</span><span class="menu-label">Ti·∫øn ƒë·ªô</span>
            </li>
        </ul>
        <div class="sidebar-footer">
            <div class="user-info" id="user-info">
                <span class="user-avatar">üë§</span>
                <span class="user-name" id="user-display-name"></span>
            </div>
            <div class="sidebar-actions">
                <div class="theme-toggle" onclick="toggleTheme()">
                    <span id="theme-icon">üåô</span>
                </div>
                <div class="logout-btn" onclick="handleLogout()" title="ƒêƒÉng xu·∫•t">
                    üö™
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- HOME PAGE -->
        <section class="page active" id="page-home">
            <div class="page-header">
                <h1>Ch√†o m·ª´ng b·∫°n! üëã</h1>
                <p class="subtitle">H·ªçc ti·∫øng Anh m·ªói ng√†y v·ªõi Flashcard</p>
            </div>
            <div class="stats-grid" id="home-stats">
                <div class="stat-card glass">
                    <div class="stat-icon">üìñ</div>
                    <div class="stat-info">
                        <span class="stat-number" id="stat-total">0</span>
                        <span class="stat-label">T·ªïng t·ª´ v·ª±ng</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <span class="stat-number" id="stat-known">0</span>
                        <span class="stat-label">ƒê√£ thu·ªôc</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">üìñ</div>
                    <div class="stat-info">
                        <span class="stat-number" id="stat-learning">0</span>
                        <span class="stat-label">ƒêang h·ªçc</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon">üÜï</div>
                    <div class="stat-info">
                        <span class="stat-number" id="stat-new">0</span>
                        <span class="stat-label">Ch∆∞a h·ªçc</span>
                    </div>
                </div>
            </div>
            <div class="categories-section">
                <h2>üìÇ Ch·ªçn ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu</h2>
                <div class="categories-grid" id="categories-grid"></div>
            </div>
            <div class="recent-quiz-section">
                <h2>üìù L·ªãch s·ª≠ ki·ªÉm tra g·∫ßn ƒë√¢y</h2>
                <div class="quiz-history-list" id="home-quiz-history"></div>
            </div>
        </section>

        <!-- STUDY PAGE -->
        <section class="page" id="page-study">
            <div class="page-header">
                <h1>üÉè H·ªçc Flashcard</h1>
                <div class="study-controls">
                    <select id="study-category" class="select-input" onchange="loadStudyCards()">
                        <option value="">T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
                    </select>
                    <button class="btn btn-secondary" onclick="shuffleCards()">üîÄ X√°o tr·ªôn</button>
                </div>
            </div>
            <div class="flashcard-area">
                <div class="card-counter">
                    <span id="card-current">0</span> / <span id="card-total">0</span>
                </div>
                <div class="flashcard-container" id="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-front">
                            <div class="card-category" id="card-category"></div>
                            <div class="card-word" id="card-word">Select a category</div>
                            <div class="card-phonetic" id="card-phonetic"></div>
                            <button class="btn-speak" onclick="event.stopPropagation(); speakWord()"
                                title="Ph√°t √¢m">üîä</button>
                            <div class="card-hint">Nh·∫•n ƒë·ªÉ l·∫≠t th·∫ª</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="card-meaning" id="card-meaning"></div>
                            <div class="card-example" id="card-example"></div>
                            <div class="card-hint">Nh·∫•n ƒë·ªÉ xem t·ª´</div>
                        </div>
                    </div>
                </div>
                <div class="card-actions">
                    <button class="btn btn-danger" onclick="markWord(false)" id="btn-unknown">‚ùå Ch∆∞a bi·∫øt</button>
                    <button class="btn btn-outline" onclick="prevCard()">‚óÄ Tr∆∞·ªõc</button>
                    <button class="btn btn-outline" onclick="nextCard()">Sau ‚ñ∂</button>
                    <button class="btn btn-success" onclick="markWord(true)" id="btn-known">‚úÖ ƒê√£ bi·∫øt</button>
                </div>
            </div>
        </section>

        <!-- QUIZ PAGE -->
        <section class="page" id="page-quiz">
            <div class="page-header">
                <h1>üìù Ki·ªÉm tra t·ª´ v·ª±ng</h1>
            </div>
            <div class="quiz-setup" id="quiz-setup">
                <div class="quiz-setup-card glass">
                    <h2>C√†i ƒë·∫∑t b√†i ki·ªÉm tra</h2>
                    <div class="form-group">
                        <label>Ch·ªß ƒë·ªÅ</label>
                        <select id="quiz-category" class="select-input">
                            <option value="">T·∫•t c·∫£</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>S·ªë c√¢u h·ªèi</label>
                        <select id="quiz-count" class="select-input">
                            <option value="5">5 c√¢u</option>
                            <option value="10" selected>10 c√¢u</option>
                            <option value="15">15 c√¢u</option>
                            <option value="20">20 c√¢u</option>
                        </select>
                    </div>
                    <button class="btn btn-primary btn-lg" onclick="startQuiz()">üöÄ B·∫Øt ƒë·∫ßu</button>
                </div>
            </div>
            <div class="quiz-area hidden" id="quiz-area">
                <div class="quiz-progress">
                    <div class="quiz-progress-bar">
                        <div class="quiz-progress-fill" id="quiz-progress-fill"></div>
                    </div>
                    <span id="quiz-counter">1/10</span>
                </div>
                <div class="quiz-question glass" id="quiz-question">
                    <h2 class="quiz-word" id="quiz-word"></h2>
                    <p class="quiz-phonetic" id="quiz-phonetic"></p>
                    <button class="btn-speak" onclick="speakQuizWord()" title="Ph√°t √¢m">üîä</button>
                </div>
                <div class="quiz-options" id="quiz-options"></div>
            </div>
            <div class="quiz-result hidden" id="quiz-result">
                <div class="result-card glass">
                    <div class="result-emoji" id="result-emoji">üéâ</div>
                    <h2 id="result-title">Tuy·ªát v·ªùi!</h2>
                    <div class="result-score">
                        <span class="score-number" id="result-score">0</span>
                        <span class="score-total">/ <span id="result-total">0</span></span>
                    </div>
                    <div class="result-percentage" id="result-percentage">0%</div>
                    <div class="result-details" id="result-details"></div>
                    <div class="result-actions">
                        <button class="btn btn-primary" onclick="startQuiz()">üîÑ L√†m l·∫°i</button>
                        <button class="btn btn-outline" onclick="showQuizSetup()">‚öôÔ∏è C√†i ƒë·∫∑t</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- MANAGE VOCABULARY PAGE -->
        <section class="page" id="page-manage">
            <div class="page-header">
                <h2>üìö Qu·∫£n l√Ω t·ª´ v·ª±ng</h2>
                <button class="btn btn-primary" onclick="showAddModal()">‚ûï Th√™m t·ª´ m·ªõi</button>
            </div>
            <div class="manage-filters">
                <select id="manage-category" class="select-input" onchange="loadManageWords()">
                    <option value="">T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
                </select>
                <input type="text" id="manage-search" class="text-input" placeholder="üîç T√¨m t·ª´..."
                    oninput="filterManageWords()">
            </div>
            <div class="word-list" id="word-list"></div>
        </section>

        <!-- SENTENCE STRUCTURES PAGE -->
        <section class="page" id="page-sentences">
            <div class="page-header">
                <h2>üìê C·∫•u tr√∫c c√¢u</h2>
                <button class="btn btn-primary" onclick="showAddSentenceModal()">‚ûï Th√™m c·∫•u tr√∫c</button>
            </div>
            <div class="manage-filters">
                <select id="sentence-category-filter" class="select-input" onchange="loadSentences()">
                    <option value="">T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
                </select>
                <input type="text" id="sentence-search" class="text-input" placeholder="üîç T√¨m c·∫•u tr√∫c..."
                    oninput="filterSentences()">
            </div>
            <div class="sentence-list" id="sentence-list"></div>
        </section>

        <!-- PROGRESS PAGE -->
        <section class="page" id="page-progress">
            <div class="page-header">
                <h1>üìä Ti·∫øn ƒë·ªô h·ªçc t·∫≠p</h1>
            </div>
            <div class="progress-overview" id="progress-overview">
                <div class="progress-ring-card glass">
                    <div class="progress-ring" id="progress-ring">
                        <svg viewBox="0 0 120 120">
                            <circle class="ring-bg" cx="60" cy="60" r="50" />
                            <circle class="ring-fill" id="ring-fill" cx="60" cy="60" r="50" stroke-dasharray="314"
                                stroke-dashoffset="314" />
                        </svg>
                        <div class="ring-text">
                            <span class="ring-percent" id="ring-percent">0%</span>
                            <span class="ring-label">ho√†n th√†nh</span>
                        </div>
                    </div>
                </div>
                <div class="progress-bars-card glass">
                    <h3>Chi ti·∫øt theo ch·ªß ƒë·ªÅ</h3>
                    <div id="category-progress"></div>
                </div>
            </div>
            <div class="quiz-history-section glass">
                <h3>üìù L·ªãch s·ª≠ ki·ªÉm tra</h3>
                <div id="progress-quiz-history"></div>
            </div>
        </section>
    </main>

    <!-- VOCABULARY MODAL -->
    <div class="modal-overlay hidden" id="modal-overlay" onclick="closeModal()">
        <div class="modal glass" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="modal-title">Th√™m t·ª´ m·ªõi</h2>
                <button class="btn-close" onclick="closeModal()">‚úï</button>
            </div>
            <form id="word-form" onsubmit="saveWord(event)">
                <input type="hidden" id="word-id">
                <div class="form-group">
                    <label>T·ª´ ti·∫øng Anh *</label>
                    <input type="text" id="input-word" class="text-input" required placeholder="e.g. Elephant">
                </div>
                <div class="form-group">
                    <label>Nghƒ©a ti·∫øng Vi·ªát *</label>
                    <input type="text" id="input-meaning" class="text-input" required placeholder="e.g. Con voi">
                </div>
                <div class="form-group">
                    <label>Phi√™n √¢m</label>
                    <input type="text" id="input-phonetic" class="text-input" placeholder="e.g. /Ààel…™f…ônt/">
                </div>
                <div class="form-group">
                    <label>V√≠ d·ª•</label>
                    <input type="text" id="input-example" class="text-input"
                        placeholder="e.g. The elephant is very big.">
                </div>
                <div class="form-group">
                    <label>Ch·ªß ƒë·ªÅ *</label>
                    <input type="text" id="input-category" class="text-input" required placeholder="e.g. Animals"
                        list="category-datalist">
                    <datalist id="category-datalist"></datalist>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">üíæ L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

    <!-- SENTENCE STRUCTURE MODAL -->
    <div class="modal-overlay hidden" id="sentence-modal-overlay" onclick="closeSentenceModal()">
        <div class="modal glass modal-lg" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="sentence-modal-title">Th√™m c·∫•u tr√∫c c√¢u</h2>
                <button class="btn-close" onclick="closeSentenceModal()">‚úï</button>
            </div>
            <form id="sentence-form" onsubmit="saveSentence(event)">
                <input type="hidden" id="sentence-id">
                <div class="form-group">
                    <label>C·∫•u tr√∫c *</label>
                    <input type="text" id="input-structure" class="text-input" required placeholder="e.g. S + V + O">
                </div>
                <div class="form-group">
                    <label>Nghƒ©a / Gi·∫£i th√≠ch *</label>
                    <input type="text" id="input-sent-meaning" class="text-input" required
                        placeholder="e.g. Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + T√¢n ng·ªØ">
                </div>
                <div class="form-group">
                    <label>C√¥ng th·ª©c</label>
                    <input type="text" id="input-formula" class="text-input"
                        placeholder="e.g. Subject + Verb(s/es) + Object">
                </div>
                <div class="form-group">
                    <label>Ch·ªß ƒë·ªÅ *</label>
                    <input type="text" id="input-sent-category" class="text-input" required placeholder="e.g. Tenses"
                        list="sent-category-datalist">
                    <datalist id="sent-category-datalist"></datalist>
                </div>
                <div class="form-group">
                    <label>Ghi ch√∫</label>
                    <textarea id="input-note" class="text-input textarea-input"
                        placeholder="Ghi ch√∫ th√™m..."></textarea>
                </div>
                <div class="form-group">
                    <label>V√≠ d·ª•</label>
                    <div id="examples-container">
                        <div class="example-row">
                            <input type="text" class="text-input example-en" placeholder="English: I eat rice.">
                            <input type="text" class="text-input example-vi" placeholder="Vietnamese: T√¥i ƒÉn c∆°m.">
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline" onclick="addExampleRow()">+ Th√™m v√≠ d·ª•</button>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeSentenceModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">üíæ L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

    <!-- TOAST -->
    <div class="toast-container" id="toast-container"></div>

    <script src="app.js"></script>
</body>

</html>